<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Organograma Engemon</title>

  <!-- ====== IMPORTAÇÕES EXTERNAS ====== -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://d3js.org/d3.v7.min.js"></script>

   <!-- ====== SCRIPTS JS ====== -->
    <script src="index.js"></script>

    <style rel="stylesheet" href="style.css"></style>
    
</head>

<body>

  <!-- ====== HEADER ====== -->
  <header class="hero-bg py-12 shadow-lg text-center">
    <h1 class="text-5xl font-extrabold drop-shadow-md" style="color:var(--header-text);">
      Organograma <span style="color:#00AEEF">Engemon</span>
    </h1>
    <p class="mt-3 text-lg font-medium" style="color:var(--header-text);">Estrutura organizacional da Engemon</p>

    <!-- Visual theme switch -->
    <div class="theme-switch" aria-hidden="false">
      <span class="label" style="color:var(--header-text);">Tema</span>
      <label class="switch" title="Alternar tema">
        <input id="toggleThemeSwitch" type="checkbox" aria-label="Alternar tema claro/escuro">
        <span class="slider"></span>
      </label>
    </div>
  </header>

  <!-- ====== MAIN: FILTROS + CHART ====== -->
  <main class="p-6 space-y-6">

    <!-- ==== FILTROS ==== -->
    <div id="filtersPanel" class="flex flex-wrap items-end gap-4 filters-panel p-4 rounded-lg shadow">
      <div class="flex flex-col">
        <label for="departamento" class="font-semibold text-sm mb-1">Departamento:</label>
        <div id="departamento-container" class="relative w-56">
          <input id="departamento" autocomplete="off" type="text"
            class="border rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-blue-400 outline-none"
            placeholder="Filtrar departamento..." />
          <div id="departamento-list" class="autocomplete-list hidden"></div>
        </div>
      </div>
      <button id="btnFiltrar" class="btn-primary">Filtrar</button>

      <div class="flex flex-col">
        <label for="buscaColaborador" class="font-semibold text-sm mb-1">Colaborador:</label>
        <div id="colaborador-container" class="relative w-56">
          <input id="buscaColaborador" autocomplete="off" type="text"
            placeholder="Buscar colaborador..."
            class="border rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-blue-400 outline-none" />
          <div id="colaborador-list" class="autocomplete-list hidden"></div>
        </div>
      </div>
      <button id="btnIrColaborador" class="btn-primary">Ir para colaborador</button>

      <div class="relative inline-block">
        <button id="btnCamera" class="btn-primary flex items-center gap-2">📸 Exportar</button>

        <div id="cameraDropdown" class="absolute hidden mt-2 w-64 border rounded-lg shadow-lg z-50 p-2">
          <div class="mb-2">
            <button id="exportVisible" class="block w-full px-3 py-2 text-left hover:bg-gray-100 rounded">Exportar área visível</button>
            <button id="exportCrop" class="block w-full px-3 py-2 text-left hover:bg-gray-100 rounded mt-1">Selecionar recorte</button>
          </div>

          <div class="border-t pt-2 mt-2">
            <label class="block text-xs font-medium mb-1">Background</label>
            <select id="exportBackground" class="w-full border rounded px-2 py-1">
              <option value="white">Branco</option>
              <option value="transparent">Transparente</option>
              <option value="brand">Azul Engemon</option>
            </select>
          </div>

          <div class="border-t pt-2 mt-2">
            <label class="block text-xs font-medium mb-1">Qualidade (DPI)</label>
            <select id="exportScale" class="w-full border rounded px-2 py-1">
              <option value="1">1x (padrão)</option>
              <option value="2">2x (melhor)</option>
              <option value="3">3x (alta)</option>
            </select>
          </div>
        </div>
      </div>

      <div class="flex items-center gap-2 ml-auto">
        <button id="zoomIn" title="Aumentar zoom" class="btn-primary">+</button>
        <button id="zoomOut" title="Diminuir zoom" class="btn-primary">–</button>
        <button id="resetZoom" title="Resetar zoom" class="btn-primary" style="background:gray;">⟳</button>
      </div>
    </div>

    <!-- ==== ÁREA DO ORGANOGRAMA ==== -->
    <div id="orgWrapper" class="relative inline-block w-full">
      <div id="orgContainer" class="org-container p-4">
        <div id="chart"></div>
      </div>
    </div>
  </main>

  <!-- Export modal -->
  <div id="exportModal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
    <div class="rounded-lg shadow-lg w-80 text-center" style="background:var(--modal-bg); color:var(--modal-text); padding:16px;">
      <h3 class="text-lg font-semibold mb-4">Exportar captura</h3>
      <p class="mb-2">Escolha o formato para salvar:</p>
      <div class="flex justify-center gap-4">
        <button id="confirmPNG" class="btn-primary" style="background: #22c55e;">PNG</button>
        <button id="confirmPDF" class="btn-primary" style="background: #ef4444;">PDF</button>
      </div>

      <div class="modal-bottom">
        <button id="redoSelection" class="btn-primary" style="background:#f59e0b;">Refazer seleção</button>
        <button id="cancelExport" class="px-3 py-2 rounded-md" style="background:transparent; border:1px solid var(--dropdown-border); color:var(--modal-text);">Fechar</button>
      </div>
    </div>
  </div>

  
<footer class="px-2 py-1 text-base flex flex-col md:flex-row md:justify-between items-start md:items-center bg-gray-50 border-t min-h-0">
  <div class="flex items-center gap-3 mb-2 md:mb-0">
    <a href='https://postimg.cc/bGkB7GJ5' target='_blank' class="block">
      <img 
        src='https://i.postimg.cc/R0DxnKzv/engemon-logos.png'
        alt='Logo Engemon'
        class="w-24 md:w-36 lg:w-44 transition-transform duration-300 hover:scale-105"
      />
    </a>
    <span class="ml-3 text-gray-700 font-semibold text-lg hidden md:inline">© Engemon — Organograma</span>
  </div>
  <div class="flex flex-col md:flex-row gap-2 md:gap-4 w-full md:w-auto md:items-center">
    <span class="md:hidden text-gray-700 font-semibold text-lg mb-1">© Engemon — Organograma</span>
    <a 
      href="mailto:gabriel.pereira@engemon.com.br?subject=Ajuda%20Organograma&body=Ol%C3%A1%2C%20preciso%20de%20ajuda%20com..." 
      class="px-6 py-2 rounded-full bg-gradient-to-br from-indigo-500 via-sky-500 to-cyan-400 text-white font-semibold text-base shadow-sm hover:scale-105 transition-transform duration-200 focus:outline-none focus:ring-2 focus:ring-sky-300"
    >
      Ajuda
    </a>
    <a 
      href="mailto:gabriel.pereira@engemon.com.br?subject=Feedback%20Organograma&body=Deixe%20seu%20feedback%20aqui..." 
      class="px-6 py-2 rounded-full bg-gradient-to-br from-pink-500 via-fuchsia-500 to-purple-400 text-white font-semibold text-base shadow-sm hover:scale-105 transition-transform duration-200 focus:outline-none focus:ring-2 focus:ring-fuchsia-300"
    >
      Feedback
    </a>
  </div>
</footer>
</body>
</html>